<div class="min-vh-100 d-flex flex-column">
  <app-header></app-header>
  <div class="flex-grow-1 d-flex flex-column">
    <div class="container py-5">
      <div class="row">
        <form [formGroup]="userProfileForm">
        <div class="col-md-12">
          <div class="bg-white rounded-3 p-4 shadow-lg rounded-4">
            <div class="row">
              <!-- Cột phải: Danh sách đơn hàng -->
              <div class="col-md-12">
                <h5 class="fw-bold mb-3">Lịch sử đặt hàng</h5>
                <div class="table-responsive" style="max-height: 400px; min-height: 200px; overflow-y: auto;">
                  <table class="table table-striped border rounded-2 order-table mb-0">
                    <thead class="table-light">
                      <tr>
                        <th>Mã đơn</th>
                        <th>Họ Tên</th>
                        <th>Email</th>
                        <th>Số điện thoại</th>
                        <th>Địa chỉ</th>
                        <th>Ngày đặt</th>
                        <th>Trạng thái</th>
                        <th>Tổng tiền</th>
                        <th>Vận chuyển</th>
                        <th>Thanh toán</th>
                        <th>Thao tác</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let order of orders">
                        <td>{{ order.id }}</td>
                        <td>{{ order.fullname }}</td>
                        <td>{{ order.email }}</td>
                        <td>{{ order.phone_number }}</td>
                        <td>{{ order.address }}</td>
                        <td>{{ order.order_date | date : "dd/MM/yyyy" }}</td>
                        <td>
                          <span class="badge"
                     [ngClass]="{
    'bg-secondary': order.status === 'pending',
    'bg-primary': order.status === 'processing',

    'bg-info': order.status === 'shipped' || order.status === 'shipping' || order.status === 'waiting_for_stock',
    'bg-warning': order.status === 'out_of_stock_pending',
    'text-dark': order.status === 'shipped' || order.status === 'shipping' || 
                 order.status === 'waiting_for_stock' || order.status === 'out_of_stock_pending',

    'bg-success': order.status === 'delivered',
    'bg-danger': order.status === 'cancelled' || order.status === 'cancelled_out_of_stock',
    'bg-dark': order.status === 'refused_on_delivery'
  }">
                            {{ order.status }}
                          </span>
                        </td>
                        <td>{{ order.total_money | currency : "VND" : "symbol" }}</td>
                        <td>{{ order.shipping_method }}</td>
                        <td>{{ order.payment_method }}</td>
                        <td>
                          <button class="btn btn-outline-primary btn-sm" (click)="viewDetails(order)"
>
                            <i class="bi bi-eye"></i> Xem
                          </button>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              <!-- Kết thúc row -->
            </div>
          </div>
        </div>
        </form>
      </div>
    </div>
  </div>
  <app-footer></app-footer>
</div>
