/* src/app/components/dashboard-statistics/dashboard-statistics.component.scss */
:host { display: block; }

.toolbar { display: flex; gap: 12px; align-items: center; margin-bottom: 16px; margin-top:10px;
  select, button { padding: 6px 10px; }
}
.notice { padding: 10px 12px; border-radius: 8px; background: #fff3cd; border: 1px solid #ffeeba; margin-bottom: 12px; }
.notice.error { background: #fdecea; border-color: #f5c2c7; }

.kpi-grid {
  display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 16px;
  .kpi { background: #fff; border-radius: 12px; padding: 16px; box-shadow: 0 2px 8px rgba(0,0,0,.06); }
  .kpi-title { color: #666; font-size: 12px; margin-bottom: 6px; }
  .kpi-value { font-weight: 700; font-size: 18px; }
}

.panel { background: transparent; margin-bottom: 16px; }
.two-cols { display: grid; grid-template-columns: 2fr 1fr; gap: 16px; }
.panel-section { background: #fff; border-radius: 12px; padding: 14px; box-shadow: 0 2px 8px rgba(0,0,0,.06); }
.panel-title { font-weight: 600; margin-bottom: 10px; }

.bars { display: grid; gap: 8px; }
.bar-row { display: grid; grid-template-columns: 40px 1fr max-content; gap: 10px; align-items: center; }
.bar-label { color: #666; font-size: 12px; }
.bar-track { background: #f2f4f7; border-radius: 999px; height: 10px; overflow: hidden; }
.bar-fill { height: 100%; background: #4f46e5; } /* màu chính */
.bar-value { font-variant-numeric: tabular-nums; font-size: 12px; color: #333; }

.role { display: grid; gap: 10px; }
.role-row { display: grid; grid-template-columns: max-content 1fr max-content; gap: 8px; align-items: center; }
.role-track { background: #f2f4f7; border-radius: 999px; height: 10px; overflow: hidden; }
.role-fill { height: 100%; }
.role-fill.user { background: #10b981; }
.role-fill.emp { background: #f59e0b; }

.table { width: 100%; background: #fff; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,.06);
  border-collapse: collapse; overflow: hidden;
  th, td { padding: 10px 12px; border-bottom: 1px solid #eee; }
  thead th { background: #fafafa; text-align: left; }
}

@media (max-width: 900px) {
  .kpi-grid { grid-template-columns: repeat(2, 1fr); }
  .two-cols { grid-template-columns: 1fr; }
}
@media (max-width: 520px) {
  .kpi-grid { grid-template-columns: 1fr; }
}
/* Khối tổng thể (tuỳ chọn) */
.panel-section { max-width: 760px; }

/* Mỗi hàng: 3 cột cố định: Nhãn | Track | Giá trị */
.role-row{
  display: grid;
  grid-template-columns: 140px 1fr 180px; /* chỉnh 140 / 180 theo ý bạn */
  align-items: center;
  gap: 12px;
  margin-bottom: 10px;
}

/* Nhãn trái và giá trị phải cho gọn */
.role-row > span:first-child{ 
  text-align: right; 
  font-weight: 500;
  white-space: nowrap;
}
.role-row > span:last-child{ 
  text-align: left; 
  white-space: nowrap;
}

/* Track luôn full cột giữa */
.role-track{
  width: 100%;
  height: 10px;
  background: #e9ecef;
  border-radius: 999px;
  overflow: hidden;
}

/* Thanh fill */
.role-fill{
  height: 100%;
  border-radius: inherit;
  transition: width .3s ease;
}

/* Màu ví dụ (tuỳ chọn) */
.role-fill.user{ background: #6d92dd; }  /* khách hàng */
.role-fill.emp{  background: #09b364; }  /* nhân viên  */



/* Biểu đồ cột dọc */
.vchart {
  display: grid;
  grid-template-columns: 50px 1fr; /* cột thước Y + vùng cột */
  gap: 12px;
  min-height: 320px;
}

/* Thước Y (nhãn %) */
.vchart-y {
  display: grid;
  grid-template-rows: repeat(5, 1fr);
  align-items: center;
  justify-items: end;
  font-size: 12px;
  color: #6b7280;
}
.vchart-y .tick { height: 100%; display: flex; align-items: center; }

/* Vùng vẽ cột – khóa chiều cao để cột không làm vỡ layout */
.vchart-plot {
  position: relative;
  height: 340px;        /* cố định chiều cao khung chart */
  overflow: hidden;     /* tránh cột vượt ra ngoài */
  background: #fff;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  padding: 8px 8px 16px;
}

/* Lưới ngang 0/25/50/75/100% */
.vchart-plot .grid-lines {
  position: absolute;
  inset: 8px 8px 24px 8px;
  background:
    linear-gradient(to bottom, rgba(0,0,0,0.08) 1px, transparent 1px) 0 0 / 100% calc(25% - 1px),
    linear-gradient(to bottom, rgba(0,0,0,0.10) 1px, transparent 1px) 0 0 / 100% 100%;
  pointer-events: none;
}

/* 12 cột tháng */
.vcols {
  position: relative;
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  align-items: end;
  gap: 10px;
  height: 100%;
}
// .vcol {
//   display: grid;
//   grid-template-rows: 1fr auto; /* bar + label tháng */
//   gap: 6px;
//   min-width: 18px;
// }

/* Cột – chiều cao lấy từ [style.height]="widthPercent(t)" */
.bar {
  position: relative;
  height: 0;            /* sẽ bị override bởi inline style */
  min-height: 2px;      /* tháng = 0 vẫn có vệt nhỏ */
  background: linear-gradient(180deg, #2b56ff, #4661ff);
  border-radius: 6px 6px 0 0;
  box-shadow: 0 6px 16px rgba(43,86,255,0.25);
  transition: height .25s ease, filter .15s ease;
}
.bar:hover { filter: brightness(1.06); }

/* Giá trị tiền trên đầu cột */
.bar-value {
  position: absolute;
  bottom: calc(100% + 6px);
  left: 50%;
  transform: translateX(-50%);
  font-size: 11px;
  color: #111827;
  background: #f9fafb;
  border: 1px solid #e5e7eb;
  padding: 2px 6px;
  border-radius: 4px;
  white-space: nowrap;
  pointer-events: none;
}

/* Nhãn tháng */
.vcol-label {
  text-align: center;
  font-size: 12px;
  color: #374151;
}
  /* ==== Overrides cho biểu đồ cột dọc ==== */

/* 1) Cho card biểu đồ dùng FULL chiều rộng, bỏ giới hạn 760px của các panel khác */
.panel-section:has(.vchart) { max-width: none; }

/* 2) Chừa khoảng trống phía trên để .bar-value không bị overflow bị ẩn */
.vchart-plot {
  height: 360px;           /* tăng nhẹ chiều cao khung */
  padding: 20px 8px 24px;  /* chừa thêm top padding cho label tiền */
}
.vchart-plot .grid-lines {
  inset: 20px 8px 32px 8px; /* đồng bộ với padding mới */
}

/* 3) Cải thiện hiển thị trên màn nhỏ */
@media (max-width: 900px) {
  .vcols { grid-template-columns: repeat(12, minmax(10px, 1fr)); gap: 8px; }
  .vcol-label { font-size: 11px; transform: rotate(-30deg); transform-origin: top right; line-height: 1; }
  .vchart-plot { height: 300px; }
}
@media (max-width: 520px) {
  .vcols { gap: 6px; }
  .vcol-label { font-size: 10px; transform: rotate(-45deg); }
  .vchart-plot { height: 260px; }
}

/* 4) Tắt animation nếu người dùng chọn giảm chuyển động */
@media (prefers-reduced-motion: reduce) {
  .bar { transition: none; }
}
.vcol { 
  display: flex;                 /* thay vì grid cho phần trên */
  flex-direction: column;
  justify-content: flex-end;     /* đáy cột bám đáy khung */
}

.vcol-label { margin-top: 6px; } /* giữ label nằm dưới */
.vcol  { height: 98%; } 

