<div class="card-body p-3" style="max-width: 500px; margin: auto;">
  <!-- Chọn coupon & tải condition -->
  <div class="mb-3 d-flex gap-2 align-items-end">
    <div class="flex-grow-1">
      <label class="form-label small mb-1">Chọn coupon</label>
      <select
        class="form-select form-select-sm"
        [(ngModel)]="selectedCouponId"
        name="selectedCouponId"
      >
        <option [ngValue]="null">-- Chọn --</option>
        <option *ngFor="let c of coupons" [ngValue]="c.id">
          {{ c.code }} (ID: {{ c.id }})
        </option>
      </select>
    </div>
    <button class="btn btn-secondary btn-sm" type="button" (click)="loadFirstConditionByCoupon()">
      Chi tiết
    </button>
  </div>

  <!-- FORM CHỈNH SỬA -->
  <form #form="ngForm" (ngSubmit)="onSubmit(form)" novalidate>
    <!-- ID (readonly) -->
    <div class="form-group mb-3">
      <label for="id" class="form-label small mb-1">ID</label>
      <div class="input-group input-group-sm">
        <span class="input-group-text"><i class="fa-solid fa-hashtag"></i></span>
        <input type="text" [value]="couponConditionResponse.id" class="form-control form-control-sm" disabled />
      </div>
    </div>

    <!-- Value -->
    <div class="form-group mb-3">
      <label for="value" class="form-label small mb-1">Giá trị tối thiểu áp dụng</label>
      <div class="input-group input-group-sm">
        <span class="input-group-text"><i class="fa-solid fa-layer-group"></i></span>
        <input
          type="number"
          id="value"
          [(ngModel)]="couponConditionResponse.value"
          name="value"
          class="form-control form-control-sm"
          required
          placeholder="VNĐ"
        />
      </div>
    </div>

    <!-- Discount Amount -->
    <div class="form-group mb-3">
      <label for="discountAmount" class="form-label small mb-1">Giảm giá theo % tổng đơn</label>
      <div class="input-group input-group-sm">
        <span class="input-group-text"><i class="fa-solid fa-percent"></i></span>
        <input
          type="number"
          id="discountAmount"
          [(ngModel)]="couponConditionResponse.discountAmount"
          name="discountAmount"
          class="form-control form-control-sm"
          step="1"
          required
          placeholder="Giảm tối đa 20%"
        />
      </div>
    </div>

    <div class="d-flex justify-content-between">
      <a routerLink="/admin/coupons" class="btn btn-outline-secondary btn-sm">
        <i class="fa-solid fa-arrow-left me-1"></i> Trở lại
      </a>
      <button type="submit" class="btn btn-primary btn-sm" [disabled]="form.invalid || loading">
        <i class="fa-regular fa-floppy-disk me-1"></i>
        {{ loading ? 'Đang lưu...' : 'Cập nhật' }}
      </button>
    </div>
  </form>
</div>

