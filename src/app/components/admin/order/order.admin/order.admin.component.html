<div class="container-fluid">
  <h1>Trang danh sách hóa đơn</h1>
  <div class="row mb-3">
    <div class="col-md-8">
      <input
        type="text"
        class="form-control search-input"
        placeholder="Tìm sản phẩm"
        [(ngModel)]="keyword"
      />
    </div>
    <div class="col-md-4">
      <button class="btn btn-primary" (click)="searchOrders()">
        <i class="fa-solid fa-magnifying-glass"></i> Tìm kiếm
      </button>
    </div>
  </div>
  <table class="table">
    <thead class="table-light">
      <tr>
        <th>ID</th>
        <th>Tên</th>
        <th>Email</th>
        <th>SĐT</th>
        <th>Địa chỉ</th>
        <th>Note</th>
        <th>Ngày đặt</th>
        <th>Status</th>
        <th>Giá</th>
        <th>Shipped</th>
        <th>Địa chỉ nhận</th>
        <th>Ngày gửi</th>
        <th>Thanh toán</th>
        <th>Hành động</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let order of orders; trackBy: trackByOrderId">
        <td>{{ order.id }}</td>
        <!-- <td>{{ order.user_id }}</td> -->
        <td>{{ order.fullname }}</td>
        <td>{{ order.email }}</td>
        <td>{{ order.phone_number }}</td>
        <td>{{ order.address }}</td>
        <td>{{ order.note }}</td>
        <td>{{ order.order_date | date : "dd/MM/yyyy" }}</td>
        <td>
          <span
            class="badge"
            [ngClass]="{
              'bg-secondary': order.status === 'pending',
              'bg-primary': order.status === 'processing',

              'bg-info':
                order.status === 'shipped' ||
                order.status === 'shipping' ||
                order.status === 'waiting_for_stock',
              'bg-warning': order.status === 'out_of_stock_pending',
              'text-dark':
                order.status === 'shipped' ||
                order.status === 'shipping' ||
                order.status === 'waiting_for_stock' ||
                order.status === 'out_of_stock_pending',

              'bg-success': order.status === 'delivered',
              'bg-danger':
                order.status === 'cancelled' ||
                order.status === 'cancelled_out_of_stock',
              'bg-dark': order.status === 'refused_on_delivery'
            }"
          >
            {{ order.status }}
          </span>
        </td>
        <td>{{ order.total_money }} đ</td>
        <td>{{ order.shipping_method }}</td>
        <td>{{ order.shipping_address }}</td>
        <td>{{ order.shipping_date | date : "dd/MM/yyyy" }}</td>
        <td>{{ order.payment_method }}</td>
        <td>
          <button (click)="viewDetails(order)" class="btn btn-primary">
            View Details
          </button>
        </td>
      </tr>
    </tbody>
  </table>
  <div class="d-flex justify-content-center">
    <nav aria-label="Page navigation">
      <ul class="pagination">
        <li class="page-item" *ngIf="currentPage > 1">
          <a class="page-link" (click)="onPageChange(1)">First</a>
        </li>
        <li class="page-item" *ngIf="currentPage > 1">
          <a class="page-link" (click)="onPageChange(currentPage - 1)"
            >Previous</a
          >
        </li>
        <ng-container *ngFor="let page of visiblePages">
          <li class="page-item" [ngClass]="{ active: page === currentPage }">
            <a class="page-link" (click)="onPageChange(page)">{{ page }}</a>
          </li>
        </ng-container>
        <li class="page-item" *ngIf="currentPage < totalPages">
          <a class="page-link" (click)="onPageChange(currentPage + 1)">Next</a>
        </li>
        <li class="page-item" *ngIf="currentPage < totalPages">
          <a class="page-link" (click)="onPageChange(totalPages)">Last</a>
        </li>
      </ul>
    </nav>
  </div>
</div>
